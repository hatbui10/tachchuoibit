<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Cắt Bit Tùy Chỉnh</title>
<style>
body{
    margin:0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: linear-gradient(135deg,#0f172a,#1e1b4b,#312e81);
    color:#f1f5f9;

    display:flex;
    justify-content:center;   /* vẫn căn giữa ngang */
    align-items:flex-start;   /* đẩy lên sát trên */
    min-height:100vh;
    padding-top:40px;         /* chỉnh khoảng cách nếu muốn */
}



.container{
    width:50%;
    max-width:300px;
    background:rgba(255,255,255,0.05);
    backdrop-filter:blur(12px);
    border-radius:20px;
    padding:30px;
    box-shadow:0 0 40px rgba(99,102,241,0.4);
     display:flex;
    flex-direction:column;
    gap:15px;
}

input{
    width:50%;
    padding:12px 15px;
    border-radius:12px;
    border:none;
    outline:none;
    background: red;
    color:white;
    font-size:15px;
    transition:0.3s;
    margin: 10px auto;
}

input:focus{
    box-shadow:0 0 10px #6366f1;
}

button{
    width:50%;
    padding:12px;
    border-radius:12px;
    border:none;
    cursor:pointer;
    font-weight:bold;
    background:linear-gradient(135deg,#6366f1,#8b5cf6);
    color:white;
    transition:0.3s;
     margin: 10px auto;

}

button:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 20px rgba(139,92,246,0.6);
}

pre{
    background:#0f172a;
    padding:15px;
    border-radius:12px;
    white-space:pre-wrap;
    max-height:300px;
    overflow:auto;
    margin-top:15px;
    box-shadow:inset 0 0 15px rgba(99,102,241,0.3);
}


label{
    display:block;
    font-size:13px;
    font-weight:600;
    text-transform:uppercase;
    margin: 1px auto;

    color:#fff;
        letter-spacing:1px;
}


h2, h3{
    text-align:center;
    margin:0;
}


.upload-btn{
    display:block;
    padding:12px;
    border-radius:12px;
    text-align:center;
    background:linear-gradient(135deg,#6366f1,#8b5cf6);
    cursor:pointer;
   
}

button:disabled{
    opacity:0.5;
    cursor:not-allowed;
}

.file-name{
 margin: 1px auto;
}



</style>
</head>








<body>

<div class="container">

<h2>Tải file và cắt bit tùy chỉnh</h2>

<label>Số bit mỗi hàng:</label>
<input type="number" id="bitLength" value="5" min="1">

<input type="file" id="fileInput" hidden>
<label for="fileInput" class="upload-btn">Chọn file TXT</label>
<div id="fileName" class="file-name">Chưa chọn file</div>

<button onclick="processFile()">Xử lý</button>
<button onclick="downloadFile()">Xuất TXT</button>

<h3>Kết quả:</h3>
<pre id="output"></pre>

</div>








<script>
let formattedText = "";

const fileInput = document.getElementById("fileInput");
const fileNameDisplay = document.getElementById("fileName");
const processBtn = document.querySelector("button[onclick='processFile()']");

// ban đầu khóa nút xử lý
processBtn.disabled = true;

// khi chọn file
fileInput.addEventListener("change", function(){
    if(this.files.length > 0){
        fileNameDisplay.textContent = this.files[0].name;
        processBtn.disabled = false;
    } else {
        fileNameDisplay.textContent = "Chưa chọn file";
        processBtn.disabled = true;
    }
});

function processFile(){
    const file = fileInput.files[0];
    const bitLength = parseInt(document.getElementById("bitLength").value);

    if(!file){
        alert("Chưa chọn file.");
        return;
    }

    if(!bitLength || bitLength <= 0){
        alert("Số bit không hợp lệ.");
        return;
    }

    const reader = new FileReader();

    reader.onload = function(e){
        let content = e.target.result;

        content = content.replace(/[^01]/g, "");

        let trimLength = content.length - (content.length % bitLength);
        content = content.substring(0, trimLength);

        let lines = [];

        for(let i=0; i<content.length; i+=bitLength){
            let chunk = content.substring(i, i+bitLength);
            lines.push(chunk.split("").join("-"));
        }

        formattedText = lines.join("\n");
        document.getElementById("output").textContent = formattedText;
    };

    reader.readAsText(file);
}

function downloadFile(){
    if(!formattedText){
        alert("Chưa có dữ liệu để xuất.");
        return;
    }

    let blob = new Blob([formattedText], {type:"text/plain"});
    let a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "bit_column.txt";
    a.click();
}
</script>




</body>
</html>



